<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹’ä¹“çƒ - GameHub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #1a252f 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }
        .header {
            text-align: center;
            margin-bottom: 15px;
        }
        .header h1 {
            color: #e74c3c;
            font-size: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .back-link {
            display: inline-block;
            margin-top: 10px;
            color: #fff;
            text-decoration: none;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        .back-link:hover {
            background: rgba(255,255,255,0.3);
        }
        .game-container {
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            padding: 20px;
            width: 100%;
            max-width: 700px;
        }
        .score-panel {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin-bottom: 15px;
        }
        .player-score {
            text-align: center;
            color: #fff;
        }
        .player-score .name {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        .player-score .score {
            font-size: 3rem;
            font-weight: bold;
        }
        .player-score.player .score { color: #3498db; }
        .player-score.computer .score { color: #e74c3c; }
        .vs {
            color: #fff;
            font-size: 1.5rem;
            font-weight: bold;
        }
        .table {
            position: relative;
            width: 100%;
            height: 400px;
            background: linear-gradient(180deg, #1e5631 0%, #1a472a 100%);
            border-radius: 10px;
            border: 8px solid #5d4e37;
            overflow: hidden;
        }
        .net {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: #fff;
            transform: translateY(-50%);
        }
        .net::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 0;
            right: 0;
            height: 24px;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                transparent 8px,
                rgba(255,255,255,0.3) 8px,
                rgba(255,255,255,0.3) 10px
            );
        }
        .center-line {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 3px;
            background: rgba(255,255,255,0.3);
            transform: translateX(-50%);
        }
        .paddle {
            position: absolute;
            width: 15px;
            height: 80px;
            border-radius: 5px;
            cursor: pointer;
            transition: top 0.05s;
        }
        .paddle.player {
            left: 20px;
            background: linear-gradient(90deg, #c0392b, #e74c3c);
            box-shadow: 2px 0 10px rgba(231,76,60,0.5);
        }
        .paddle.computer {
            right: 20px;
            background: linear-gradient(90deg, #2980b9, #3498db);
            box-shadow: -2px 0 10px rgba(52,152,219,0.5);
        }
        .ball {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle at 30% 30%, #fff, #ecf0f1);
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .ball::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 6px;
            height: 6px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
        }
        .message {
            color: #fff;
            font-size: 1.2rem;
            text-align: center;
            margin: 15px 0;
            min-height: 25px;
        }
        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        .btn {
            padding: 12px 24px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .btn-primary {
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            color: #fff;
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(231,76,60,0.4);
        }
        .difficulty {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }
        .diff-btn {
            padding: 8px 16px;
            font-size: 0.9rem;
            border: 2px solid rgba(255,255,255,0.3);
            background: transparent;
            color: #fff;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .diff-btn.active {
            background: rgba(255,255,255,0.2);
            border-color: #e74c3c;
        }
        .diff-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        .instructions {
            background: rgba(0,0,0,0.3);
            color: #fff;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
            text-align: center;
        }
        @media (max-width: 600px) {
            .table {
                height: 350px;
            }
            .paddle {
                height: 60px;
            }
            .player-score .score {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“ ä¹’ä¹“çƒ ğŸ“</h1>
        <a href="../../index.html" class="back-link">â† è¿”å›æ¸¸æˆåˆ—è¡¨</a>
    </div>
    
    <div class="game-container">
        <div class="score-panel">
            <div class="player-score player">
                <div class="name">ä½ </div>
                <div class="score" id="player-score">0</div>
            </div>
            <div class="vs">VS</div>
            <div class="player-score computer">
                <div class="name">ç”µè„‘</div>
                <div class="score" id="computer-score">0</div>
            </div>
        </div>
        
        <div class="message" id="message">ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"</div>
        
        <div class="table" id="table">
            <div class="center-line"></div>
            <div class="net"></div>
            <div class="paddle player" id="player-paddle"></div>
            <div class="paddle computer" id="computer-paddle"></div>
            <div class="ball" id="ball"></div>
        </div>
        
        <div class="difficulty">
            <button class="diff-btn active" onclick="setDifficulty('easy')">ç®€å•</button>
            <button class="diff-btn" onclick="setDifficulty('medium')">ä¸­ç­‰</button>
            <button class="diff-btn" onclick="setDifficulty('hard')">å›°éš¾</button>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" id="start-btn" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
        </div>
        
        <div class="instructions">
            ä½¿ç”¨é¼ æ ‡æˆ–è§¦æ‘¸ä¸Šä¸‹ç§»åŠ¨çƒæ‹ï¼Œå…ˆå¾—11åˆ†è·èƒœï¼
        </div>
    </div>

    <script>
        const table = document.getElementById('table');
        const playerPaddle = document.getElementById('player-paddle');
        const computerPaddle = document.getElementById('computer-paddle');
        const ball = document.getElementById('ball');
        
        // æ¸¸æˆçŠ¶æ€
        let playerScore = 0;
        let computerScore = 0;
        let gameActive = false;
        let animationId;
        
        // éš¾åº¦è®¾ç½®
        let difficulty = 'easy';
        const difficultySettings = {
            easy: { speed: 4, paddleSpeed: 3, reactionDelay: 100 },
            medium: { speed: 6, paddleSpeed: 4, reactionDelay: 60 },
            hard: { speed: 8, paddleSpeed: 5, reactionDelay: 30 }
        };
        
        // çƒçš„ä½ç½®å’Œé€Ÿåº¦
        let ballX = 350;
        let ballY = 200;
        let ballSpeedX = 5;
        let ballSpeedY = 3;
        
        // çƒæ‹ä½ç½®
        let playerY = 160;
        let computerY = 160;
        
        // çƒæ‹å°ºå¯¸
        const paddleHeight = 80;
        const paddleWidth = 15;
        const ballSize = 20;
        
        // è¡¨æ ¼å°ºå¯¸
        let tableWidth, tableHeight;
        
        function updateTableSize() {
            tableWidth = table.offsetWidth;
            tableHeight = table.offsetHeight;
        }
        
        // é¼ æ ‡/è§¦æ‘¸æ§åˆ¶
        table.addEventListener('mousemove', (e) => {
            if (!gameActive) return;
            const rect = table.getBoundingClientRect();
            playerY = e.clientY - rect.top - paddleHeight / 2;
            playerY = Math.max(0, Math.min(tableHeight - paddleHeight, playerY));
            playerPaddle.style.top = `${playerY}px`;
        });
        
        table.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!gameActive) return;
            const rect = table.getBoundingClientRect();
            const touch = e.touches[0];
            playerY = touch.clientY - rect.top - paddleHeight / 2;
            playerY = Math.max(0, Math.min(tableHeight - paddleHeight, playerY));
            playerPaddle.style.top = `${playerY}px`;
        });
        
        function setDifficulty(level) {
            difficulty = level;
            document.querySelectorAll('.diff-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent.includes(
                    level === 'easy' ? 'ç®€å•' : level === 'medium' ? 'ä¸­ç­‰' : 'å›°éš¾'
                ));
            });
        }
        
        function resetBall(direction = 1) {
            updateTableSize();
            ballX = tableWidth / 2;
            ballY = tableHeight / 2;
            
            const settings = difficultySettings[difficulty];
            const speed = settings.speed;
            const angle = (Math.random() - 0.5) * Math.PI / 3;
            
            ballSpeedX = speed * direction * Math.cos(angle);
            ballSpeedY = speed * Math.sin(angle);
            
            ball.style.left = `${ballX - ballSize / 2}px`;
            ball.style.top = `${ballY - ballSize / 2}px`;
        }
        
        function updateComputer() {
            const settings = difficultySettings[difficulty];
            const targetY = ballY - paddleHeight / 2;
            
            // æ·»åŠ ä¸€äº›ååº”å»¶è¿Ÿå’Œä¸ç²¾ç¡®æ€§
            const randomOffset = (Math.random() - 0.5) * 20;
            const adjustedTarget = targetY + randomOffset;
            
            if (computerY < adjustedTarget) {
                computerY = Math.min(computerY + settings.paddleSpeed, adjustedTarget);
            } else if (computerY > adjustedTarget) {
                computerY = Math.max(computerY - settings.paddleSpeed, adjustedTarget);
            }
            
            computerY = Math.max(0, Math.min(tableHeight - paddleHeight, computerY));
            computerPaddle.style.top = `${computerY}px`;
        }
        
        function checkCollision() {
            const ballLeft = ballX - ballSize / 2;
            const ballRight = ballX + ballSize / 2;
            const ballTop = ballY - ballSize / 2;
            const ballBottom = ballY + ballSize / 2;
            
            // ç©å®¶çƒæ‹ç¢°æ’
            const playerPaddleLeft = 20 + paddleWidth;
            if (ballLeft <= playerPaddleLeft && ballRight >= 20) {
                if (ballTop < playerY + paddleHeight && ballBottom > playerY) {
                    ballSpeedX = Math.abs(ballSpeedX) * 1.05;
                    const hitPos = (ballY - playerY) / paddleHeight - 0.5;
                    ballSpeedY = hitPos * 8;
                    ballX = playerPaddleLeft + ballSize / 2;
                    return;
                }
            }
            
            // ç”µè„‘çƒæ‹ç¢°æ’
            const computerPaddleRight = tableWidth - 20 - paddleWidth;
            if (ballRight >= computerPaddleRight && ballLeft <= tableWidth - 20) {
                if (ballTop < computerY + paddleHeight && ballBottom > computerY) {
                    ballSpeedX = -Math.abs(ballSpeedX) * 1.05;
                    const hitPos = (ballY - computerY) / paddleHeight - 0.5;
                    ballSpeedY = hitPos * 8;
                    ballX = computerPaddleRight - ballSize / 2;
                    return;
                }
            }
            
            // ä¸Šä¸‹è¾¹ç•Œ
            if (ballY <= ballSize / 2) {
                ballY = ballSize / 2;
                ballSpeedY = Math.abs(ballSpeedY);
            } else if (ballY >= tableHeight - ballSize / 2) {
                ballY = tableHeight - ballSize / 2;
                ballSpeedY = -Math.abs(ballSpeedY);
            }
            
            // å·¦å³è¾¹ç•Œï¼ˆå¾—åˆ†ï¼‰
            if (ballX < 0) {
                computerScore++;
                updateScore();
                if (computerScore >= 11) {
                    endGame();
                } else {
                    resetBall(1);
                }
            } else if (ballX > tableWidth) {
                playerScore++;
                updateScore();
                if (playerScore >= 11) {
                    endGame();
                } else {
                    resetBall(-1);
                }
            }
        }
        
        function updateScore() {
            document.getElementById('player-score').textContent = playerScore;
            document.getElementById('computer-score').textContent = computerScore;
        }
        
        function gameLoop() {
            if (!gameActive) return;
            
            // æ›´æ–°çƒä½ç½®
            ballX += ballSpeedX;
            ballY += ballSpeedY;
            
            // æ›´æ–°æ˜¾ç¤º
            ball.style.left = `${ballX - ballSize / 2}px`;
            ball.style.top = `${ballY - ballSize / 2}px`;
            
            // æ›´æ–°ç”µè„‘
            updateComputer();
            
            // æ£€æŸ¥ç¢°æ’
            checkCollision();
            
            animationId = requestAnimationFrame(gameLoop);
        }
        
        function startGame() {
            updateTableSize();
            
            playerScore = 0;
            computerScore = 0;
            playerY = tableHeight / 2 - paddleHeight / 2;
            computerY = tableHeight / 2 - paddleHeight / 2;
            
            playerPaddle.style.top = `${playerY}px`;
            computerPaddle.style.top = `${computerY}px`;
            
            updateScore();
            resetBall(Math.random() > 0.5 ? 1 : -1);
            
            gameActive = true;
            document.getElementById('start-btn').style.display = 'none';
            document.getElementById('message').textContent = 'æ¸¸æˆè¿›è¡Œä¸­...';
            
            gameLoop();
        }
        
        function endGame() {
            gameActive = false;
            cancelAnimationFrame(animationId);
            
            let result;
            if (playerScore > computerScore) {
                result = `ğŸ‰ ä½ èµ¢äº†ï¼ ${playerScore} - ${computerScore}`;
            } else {
                result = `ç”µè„‘è·èƒœ ${playerScore} - ${computerScore}ï¼Œå†æ¥å†å‰ï¼`;
            }
            
            document.getElementById('message').textContent = result;
            document.getElementById('start-btn').textContent = 'å†æ¥ä¸€å±€';
            document.getElementById('start-btn').style.display = 'inline-block';
        }
        
        // çª—å£å¤§å°å˜åŒ–æ—¶æ›´æ–°
        window.addEventListener('resize', updateTableSize);
        updateTableSize();
    </script>
</body>
</html>
