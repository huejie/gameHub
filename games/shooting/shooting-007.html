<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊâìÈ∏≠Â≠ê - GameHub100</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(180deg, #87CEEB 0%, #98D8C8 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #2d3436;
        }
        .header { padding: 15px; text-align: center; }
        .header h1 { font-size: 1.8rem; }
        .game-container { position: relative; margin: 10px; }
        canvas { border: 3px solid #27ae60; border-radius: 10px; cursor: crosshair; display: block; }
        .stats { display: flex; gap: 20px; margin: 10px 0; }
        .stat { text-align: center; }
        .stat-value { font-size: 1.5rem; font-weight: bold; color: #27ae60; }
        .controls { display: flex; gap: 10px; margin-top: 10px; }
        button {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #27ae60;
            color: white;
            font-weight: bold;
        }
        button:hover { background: #2ecc71; }
        .back-link { position: fixed; top: 10px; left: 10px; color: #27ae60; text-decoration: none; }
        .game-over {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
        }
        .game-over h2 { color: #e74c3c; }
    </style>
</head>
<body>
    <a href="../index.html" class="back-link">‚Üê ËøîÂõû</a>
    <div class="header">
        <h1>ü¶Ü ÊâìÈ∏≠Â≠ê</h1>
        <p>ÁÇπÂáªÂ∞ÑÂáªÈ£ûË°åÁöÑÈ∏≠Â≠êÔºÅ</p>
    </div>
    <div class="stats">
        <div class="stat"><div class="stat-value" id="score">0</div><div>ÂæóÂàÜ</div></div>
        <div class="stat"><div class="stat-value" id="ammo">10</div><div>ÂºπËçØ</div></div>
        <div class="stat"><div class="stat-value" id="round">1</div><div>ÂõûÂêà</div></div>
    </div>
    <div class="game-container">
        <canvas id="gameCanvas" width="500" height="400"></canvas>
        <div class="game-over" id="gameOver">
            <h2>ÂõûÂêàÁªìÊùüÔºÅ</h2>
            <p>ÂæóÂàÜ: <span id="finalScore">0</span></p>
            <button onclick="restartGame()">ÈáçÊñ∞ÂºÄÂßã</button>
        </div>
    </div>
    <div class="controls">
        <button onclick="startGame()">ÂºÄÂßãÊ∏∏Êàè</button>
        <button onclick="reload()">Ë£ÖÂºπ (R)</button>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        let ducks = [], feathers = [];
        let score = 0, ammo = 10, round = 1;
        let gameRunning = false, roundTimer = null;
        let timeLeft = 30;
        let dogs = [];
        
        class Duck {
            constructor() {
                this.direction = Math.random() > 0.5 ? 1 : -1;
                this.x = this.direction === 1 ? -40 : canvas.width + 40;
                this.y = 50 + Math.random() * 150;
                this.speed = 2 + Math.random() * 2 + round * 0.3;
                this.wingAngle = 0;
                this.size = 30;
                this.alive = true;
                this.falling = false;
                this.fallSpeed = 0;
            }
            update() {
                this.wingAngle += 0.3;
                if (this.alive && !this.falling) {
                    this.x += this.speed * this.direction;
                    this.y += Math.sin(Date.now() / 200) * 0.5;
                } else if (this.falling) {
                    this.fallSpeed += 0.5;
                    this.y += this.fallSpeed;
                    this.x += this.direction * 0.5;
                }
            }
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                if (this.direction === -1) ctx.scale(-1, 1);
                
                // Body
                ctx.fillStyle = this.alive ? '#8B4513' : '#654321';
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size, this.size * 0.6, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Head
                ctx.fillStyle = this.alive ? '#228B22' : '#1a5a1a';
                ctx.beginPath();
                ctx.arc(this.size * 0.7, -this.size * 0.3, this.size * 0.4, 0, Math.PI * 2);
                ctx.fill();
                
                // Beak
                ctx.fillStyle = '#FFA500';
                ctx.beginPath();
                ctx.moveTo(this.size * 1.1, -this.size * 0.3);
                ctx.lineTo(this.size * 1.4, -this.size * 0.2);
                ctx.lineTo(this.size * 1.1, -this.size * 0.1);
                ctx.closePath();
                ctx.fill();
                
                // Wings
                if (this.alive && !this.falling) {
                    ctx.fillStyle = '#654321';
                    ctx.beginPath();
                    const wingY = Math.sin(this.wingAngle) * 10;
                    ctx.ellipse(-5, wingY - 5, this.size * 0.5, this.size * 0.3, -0.3, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                ctx.restore();
            }
            isHit(x, y) {
                return Math.sqrt((this.x - x) ** 2 + (this.y - y) ** 2) < this.size;
            }
        }
        
        class Feather {
            constructor(x, y) {
                this.x = x; this.y = y;
                this.vx = (Math.random() - 0.5) * 4;
                this.vy = Math.random() * -3;
                this.rotation = Math.random() * Math.PI * 2;
                this.size = 5 + Math.random() * 5;
                this.alpha = 1;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.05;
                this.rotation += 0.1;
                this.alpha -= 0.01;
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size, 2, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }
        
        function spawnDuck() {
            if (Math.random() < 0.02 + round * 0.005) {
                ducks.push(new Duck());
            }
        }
        
        function drawBackground() {
            // Sky
            const skyGrad = ctx.createLinearGradient(0, 0, 0, canvas.height * 0.7);
            skyGrad.addColorStop(0, '#87CEEB');
            skyGrad.addColorStop(1, '#B0E0E6');
            ctx.fillStyle = skyGrad;
            ctx.fillRect(0, 0, canvas.width, canvas.height * 0.7);
            
            // Grass
            const grassGrad = ctx.createLinearGradient(0, canvas.height * 0.7, 0, canvas.height);
            grassGrad.addColorStop(0, '#90EE90');
            grassGrad.addColorStop(1, '#228B22');
            ctx.fillStyle = grassGrad;
            ctx.fillRect(0, canvas.height * 0.7, canvas.width, canvas.height * 0.3);
            
            // Tree
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(30, canvas.height * 0.5, 20, canvas.height * 0.3);
            ctx.fillStyle = '#228B22';
            ctx.beginPath();
            ctx.arc(40, canvas.height * 0.4, 50, 0, Math.PI * 2);
            ctx.fill();
            
            // Clouds
            ctx.fillStyle = 'rgba(255,255,255,0.8)';
            [[300, 60], [420, 100]].forEach(([cx, cy]) => {
                ctx.beginPath();
                ctx.arc(cx, cy, 25, 0, Math.PI * 2);
                ctx.arc(cx + 30, cy, 30, 0, Math.PI * 2);
                ctx.arc(cx + 60, cy, 25, 0, Math.PI * 2);
                ctx.fill();
            });
        }
        
        function updateGame() {
            if (!gameRunning) return;
            
            drawBackground();
            spawnDuck();
            
            ducks = ducks.filter(d => d.y < canvas.height + 50 && (d.alive || d.falling));
            ducks.forEach(d => { d.update(); d.draw(); });
            
            feathers = feathers.filter(f => f.alpha > 0);
            feathers.forEach(f => { f.update(); f.draw(); });
            
            requestAnimationFrame(updateGame);
        }
        
        canvas.addEventListener('click', e => {
            if (!gameRunning || ammo <= 0) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX - rect.left) * (canvas.width / rect.width);
            const y = (e.clientY - rect.top) * (canvas.height / rect.height);
            
            ammo--;
            document.getElementById('ammo').textContent = ammo;
            
            for (let i = ducks.length - 1; i >= 0; i--) {
                if (ducks[i].alive && ducks[i].isHit(x, y)) {
                    ducks[i].alive = false;
                    ducks[i].falling = true;
                    for (let j = 0; j < 8; j++) {
                        feathers.push(new Feather(ducks[i].x, ducks[i].y));
                    }
                    score += 10 * round;
                    document.getElementById('score').textContent = score;
                    break;
                }
            }
        });
        
        function reload() {
            ammo = 10;
            document.getElementById('ammo').textContent = ammo;
        }
        
        document.addEventListener('keydown', e => {
            if (e.code === 'KeyR') reload();
        });
        
        function startGame() {
            if (gameRunning) return;
            ducks = []; feathers = [];
            score = 0; ammo = 10; round = 1; timeLeft = 30;
            gameRunning = true;
            updateStats();
            updateGame();
            
            roundTimer = setInterval(() => {
                timeLeft--;
                if (timeLeft <= 0) {
                    if (score >= round * 50) {
                        round++;
                        timeLeft = 30;
                        updateStats();
                    } else {
                        endGame();
                    }
                }
            }, 1000);
        }
        
        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('ammo').textContent = ammo;
            document.getElementById('round').textContent = round;
        }
        
        function endGame() {
            gameRunning = false;
            clearInterval(roundTimer);
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').style.display = 'block';
        }
        
        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            startGame();
        }
        
        drawBackground();
    </script>
</body>
</html>